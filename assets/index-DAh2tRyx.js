(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const _="modulepreload",U=function(e){return"/"+e},E={},x=function(n,r,c){let t=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),s=i?.nonce||i?.getAttribute("nonce");t=Promise.allSettled(r.map(u=>{if(u=U(u),u in E)return;E[u]=!0;const f=u.endsWith(".css"),O=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${O}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":_,f||(l.as="script"),l.crossOrigin="",l.href=u,s&&l.setAttribute("nonce",s),document.head.appendChild(l),f)return new Promise((P,M)=>{l.addEventListener("load",P),l.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return t.then(i=>{for(const s of i||[])s.status==="rejected"&&o(s.reason);return n().catch(o)})};let m,p=null;async function A(){return m||(m=await x(()=>import("./engine-CnUmYCX9.js"),[]),await m.default()),m}async function C(e){return p=await(await A()).init(null),p}function d(){if(!p)throw new Error("Mycos engine not initialized");return p}function N(e){d().load_chunks(e)}function I(e,n){d().set_inputs(e,n)}function b(e){return d().tick(e)}function T(e,n){d().get_outputs(e,n)}function D(e){d().set_policy(e)}function H(e){const n=new DataView(e);if(new TextDecoder().decode(new Uint8Array(e.slice(0,8)))!=="MYCOSCH0")throw new Error("Invalid chunk file");return{inputs:n.getUint32(12,!0),outputs:n.getUint32(16,!0)}}const R=document.getElementById("fixture-select"),W=document.getElementById("load-btn"),w=document.getElementById("inputs"),v=document.getElementById("outputs"),$=document.getElementById("tick-btn"),q=document.getElementById("run-btn"),F=document.getElementById("n-ticks"),B=document.getElementById("policy-select"),V=document.getElementById("metric-rounds"),j=document.getElementById("metric-effects");let y=0,h=0,a=new Uint32Array(0),g=new Uint32Array(0);async function z(e){const n=`/fixtures/${e}.myc`,r=await fetch(n).then(t=>t.arrayBuffer()),c=H(r);N([r]),y=c.inputs,h=c.outputs,a=new Uint32Array(Math.ceil(y/32)),g=new Uint32Array(Math.ceil(h/32)),K(),L()}function K(){w.innerHTML="";for(let e=0;e<y;e++){const n=document.createElement("label"),r=document.createElement("input");r.type="checkbox",r.addEventListener("change",()=>{const c=Math.floor(e/32),t=e%32;r.checked?a[c]|=1<<t:a[c]&=~(1<<t)}),n.append(r,String(e)),w.append(n)}}function L(){v.innerHTML="";for(let e=0;e<h;e++){const n=document.createElement("span"),r=Math.floor(e/32),c=e%32,t=(g[r]&1<<c)!==0;n.textContent=t?"1":"0",v.append(n)}}function k(){T(0,g),L()}function S(e){V.textContent=String(e.rounds),j.textContent=String(e.effects)}$.addEventListener("click",()=>{I(0,a);const e=b();k(),S(e)});q.addEventListener("click",()=>{const e=parseInt(F.value,10)||0;I(0,a);const n=b(e);k(),S(n)});W.addEventListener("click",()=>{z(R.value)});B.addEventListener("change",()=>{D(B.value)});C();
