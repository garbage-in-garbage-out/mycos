(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const M="modulepreload",U=function(e){return"/mycos/"+e},E={},x=function(n,o,c){let t=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),s=i?.nonce||i?.getAttribute("nonce");t=Promise.allSettled(o.map(u=>{if(u=U(u),u in E)return;E[u]=!0;const f=u.endsWith(".css"),O=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${O}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":M,f||(l.as="script"),l.crossOrigin="",l.href=u,s&&l.setAttribute("nonce",s),document.head.appendChild(l),f)return new Promise((P,_)=>{l.addEventListener("load",P),l.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return t.then(i=>{for(const s of i||[])s.status==="rejected"&&r(s.reason);return n().catch(r)})};let m,p=null;async function A(){return m||(m=await x(()=>import("./engine-CsVWQ64H.js"),[]),await m.default()),m}async function C(e){return p=await(await A()).init_engine(null),p}function d(){if(!p)throw new Error("Mycos engine not initialized");return p}function N(e){d().load_chunks(e)}function I(e,n){d().set_inputs(e,n)}function b(e){return d().tick(e)}function T(e,n){d().get_outputs(e,n)}function D(e){d().set_policy(e)}function H(e){const n=new DataView(e);if(new TextDecoder().decode(new Uint8Array(e.slice(0,8)))!=="MYCOSCH0")throw new Error("Invalid chunk file");return{inputs:n.getUint32(12,!0),outputs:n.getUint32(16,!0)}}const $=document.getElementById("fixture-select"),R=document.getElementById("load-btn"),w=document.getElementById("inputs"),v=document.getElementById("outputs"),W=document.getElementById("tick-btn"),q=document.getElementById("run-btn"),F=document.getElementById("n-ticks"),B=document.getElementById("policy-select"),V=document.getElementById("metric-rounds"),j=document.getElementById("metric-effects");let y=0,h=0,a=new Uint32Array(0),g=new Uint32Array(0);async function z(e){const n=`/mycos/fixtures/${e}.myc`,o=await fetch(n).then(t=>t.arrayBuffer()),c=H(o);N([o]),y=c.inputs,h=c.outputs,a=new Uint32Array(Math.ceil(y/32)),g=new Uint32Array(Math.ceil(h/32)),K(),L()}function K(){w.innerHTML="";for(let e=0;e<y;e++){const n=document.createElement("label"),o=document.createElement("input");o.type="checkbox",o.addEventListener("change",()=>{const c=Math.floor(e/32),t=e%32;o.checked?a[c]|=1<<t:a[c]&=~(1<<t)}),n.append(o,String(e)),w.append(n)}}function L(){v.innerHTML="";for(let e=0;e<h;e++){const n=document.createElement("span"),o=Math.floor(e/32),c=e%32,t=(g[o]&1<<c)!==0;n.textContent=t?"1":"0",v.append(n)}}function k(){T(0,g),L()}function S(e){V.textContent=String(e.rounds),j.textContent=String(e.effects)}W.addEventListener("click",()=>{I(0,a);const e=b();k(),S(e)});q.addEventListener("click",()=>{const e=parseInt(F.value,10)||0;I(0,a);const n=b(e);k(),S(n)});R.addEventListener("click",()=>{z($.value)});B.addEventListener("change",()=>{D(B.value)});C();
